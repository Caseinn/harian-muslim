---
import DoaPage from "@/components/doa/doa-page";
import Layout from "@/layouts/layout.astro";
import { getAllDoa, type DoaItem } from "@/lib/api/doa";

export const prerender = false;

let doaList: DoaItem[] = [];
let error: string | null = null;

try {
  doaList = await getAllDoa();
} catch {
  error = "Gagal memuat doa.";
}
---

<Layout title="Doa" description="Kumpulan doa harian.">
  <main class="mx-auto w-full max-w-6xl px-4 py-12">
    <header class="mb-8 space-y-3">
      <h1 class="text-3xl font-semibold md:text-4xl">Doa</h1>
      <p class="text-sm text-muted-foreground">
        Kumpulan doa harian dengan teks Arab, latin, dan terjemahan.
      </p>
    </header>

    {error ? (
      <div class="rounded-2xl border border-border/60 bg-background/70 p-6 text-sm text-muted-foreground">
        {error}
      </div>
    ) : (
      <div class="illumination-panel p-6 sm:p-8">
        <div class="relative z-10">
          <DoaPage client:idle items={doaList} />
        </div>
      </div>
    )}
  </main>
</Layout>
