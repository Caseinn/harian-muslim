---
import DoaPage from "@/components/doa/doa-page";
import Layout from "@/layouts/layout.astro";
import { getAllDoa, type DoaItem } from "@/lib/api/doa";

export const prerender = false;

let doaList: DoaItem[] = [];
let error: string | null = null;

try {
  doaList = await getAllDoa();
} catch {
  error = "Gagal memuat doa.";
}
---

<Layout title="Doa" description="Kumpulan doa harian.">
  <main class="mx-auto w-full max-w-6xl px-4 py-10 md:px-6">
    <header class="mb-6">
      <h1 class="text-2xl font-semibold md:text-3xl">Doa</h1>
      <p class="text-sm text-muted-foreground">
        Kumpulan doa harian dengan teks Arab, latin, dan terjemahan.
      </p>
    </header>

    {error ? (
      <div class="rounded-2xl border border-border/60 bg-card p-6 text-sm text-muted-foreground">
        {error}
      </div>
    ) : (
      <DoaPage client:idle items={doaList} />
    )}
  </main>
</Layout>
